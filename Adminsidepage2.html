<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Manage Voters</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background:#f8f9fa; }
    .sidebar { min-height:100vh; background:linear-gradient(180deg,#e6e6fa,#dcd6f7); padding-top:20px; }
    .sidebar a { color:#4a3f91; display:block; padding:10px 20px; border-radius:6px; text-decoration:none; }
    .sidebar a.active,.sidebar a:hover { background:#b8aef5; color:#fff; }
  </style>
</head>
<body>
<div class="container-fluid">
  <div class="row">

    <!-- Sidebar -->
    <nav class="col-md-2 sidebar">
      <h4 class="text-center">üó≥Ô∏è Admin</h4>
      <a href="AdminDashboard.html">Dashboard</a>
      <a href="Adminsidepage2.html" class="active">Manage Voters</a>
      <a href="Adminsidepage3.html">Candidates</a>
      <a href="Adminsidepage4.html">Elections</a>
      <a href="Adminsidepage5.html">Assign</a>
      <a href="Adminsidepage6.html">Results</a>
      <a href="Adminsidepage7.html">Reports</a>
      <a href="Adminsidepage8.html">Settings</a>
      <a href="Adminsidepage9.html" class="text-danger">Logout</a>
    </nav>

    <!-- Content -->
    <main class="col-md-10 p-4">
      <h3 class="mb-3">Manage Voters</h3>

      <button class="btn btn-success mb-3" data-bs-toggle="modal" data-bs-target="#voterModal" onclick="openForm()">+ Add Voter</button>

      <table class="table table-striped">
        <thead><tr><th>#</th><th>Name</th><th>Email</th><th>Status</th><th>Action</th></tr></thead>
        <tbody id="voterTable">
          <tr>
            <td>1</td><td>Amit Sharma</td><td>amit@example.com</td>
            <td><span class="badge bg-success">Active</span></td>
            <td>
              <button class="btn btn-sm btn-warning" onclick="editVoter(this)">Edit</button>
              <button class="btn btn-sm btn-danger" onclick="delVoter(this)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </main>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="voterModal" tabindex="-1">
  <div class="modal-dialog"><div class="modal-content">
    <div class="modal-header"><h5 class="modal-title">Voter Form</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
    <div class="modal-body">
      <form id="voterForm">
        <input type="hidden" id="editIndex">
        <div class="mb-2"><input class="form-control" id="voterName" placeholder="Name" required></div>
        <div class="mb-2"><input type="email" class="form-control" id="voterEmail" placeholder="Email" required></div>
        <div class="mb-2">
          <select class="form-control" id="voterStatus">
            <option value="Active">Active</option>
            <option value="Blocked">Blocked</option>
          </select>
        </div>
        <button type="submit" class="btn btn-primary w-100">Save</button>
      </form>
    </div>
  </div></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
let table=document.getElementById("voterTable"), form=document.getElementById("voterForm"), modal=new bootstrap.Modal('#voterModal');
form.onsubmit=e=>{
  e.preventDefault();
  let name=voterName.value, email=voterEmail.value, status=voterStatus.value, idx=editIndex.value;
  let badge=`<span class="badge bg-${status=="Active"?"success":"danger"}">${status}</span>`;
  if(idx===""){ // add
    let row=table.insertRow();
    row.innerHTML=`<td>${table.rows.length}</td><td>${name}</td><td>${email}</td><td>${badge}</td>
      <td><button class="btn btn-sm btn-warning" onclick="editVoter(this)">Edit</button>
      <button class="btn btn-sm btn-danger" onclick="delVoter(this)">Delete</button></td>`;
  }else{ // edit
    let row=table.rows[idx-1];
    row.cells[1].innerText=name; row.cells[2].innerText=email; row.cells[3].innerHTML=badge;
  }
  form.reset(); editIndex.value=""; modal.hide();
}
function openForm(){ form.reset(); editIndex.value=""; }
function editVoter(btn){ 
  let r=btn.closest("tr"); editIndex.value=r.cells[0].innerText;
  voterName.value=r.cells[1].innerText; voterEmail.value=r.cells[2].innerText;
  voterStatus.value=r.cells[3].innerText.trim(); modal.show();
}
function delVoter(btn){ btn.closest("tr").remove(); }
</script>
</body>
</html>
